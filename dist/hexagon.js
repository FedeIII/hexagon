"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=hexagon;var _memo=require("./memo"),_memo2=_interopRequireDefault(_memo),_repositories2=require("./repositories");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var getUsePorts=function(a){var b,c=a.fn,d=a.name,e=a.ports,f=void 0===e?{}:e,g=a.cache,h=a.getRepositories,i=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=h();return(0,_repositories2.checkPortRepositories)(d,a,e),createHexagon({fn:c,name:d,ports:_objectSpread(_objectSpread({},f),a),cache:b,repositories:e})},j=(0,_memo2["default"])(i,f);return g&&(j.cache=g),b=j.cache,j},getExecute=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return function(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=_objectSpread(_objectSpread({},b),c);return 0===Object.keys(d).length&&(d=void 0),a(d)}},createHexagon=function(a){var b=a.fn,c=a.name,d=a.ports,e=void 0===d?{}:d,f=a.cache,g=a.repositories,h=void 0===g?null:g,i=h,j={name:c,execute:getExecute(b,e),get repositories(){return i},set repositories(a){i=a}};return j.usePorts=getUsePorts({fn:b,name:c,ports:e,cache:f,getRepositories:function getRepositories(){return i}}),j};function hexagon(a){return createHexagon({fn:a,name:"useCase(".concat(a.name,")"),ports:{}})}